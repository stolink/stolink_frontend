

BRANCH=$(git rev-parse --abbrev-ref HEAD)

echo "ğŸ” Pushing to: $BRANCH"

# ëª¨ë“  ë¸Œëœì¹˜: íƒ€ì… ì²´í¬
echo "Running type check..."
npm run type-check || exit 1

# main, release ë¸Œëœì¹˜: ë” ì—„ê²©í•œ ê²€ì¦
if [ "$BRANCH" = "main" ] || [ "$BRANCH" = "release" ]; then
  echo "ğŸš¨ Protected branch detected. Running full checks..."

  # ì „ì²´ ë¦°íŠ¸
  npm run lint || exit 1

  echo "âœ… All checks passed!"
fi

# release ë¸Œëœì¹˜: ì§ì ‘ í‘¸ì‹œ ê¸ˆì§€
if [ "$BRANCH" = "release" ]; then
  echo "â›” Direct push to release is not allowed!"
  echo "Please create a PR from main to release."
  exit 1
fi
